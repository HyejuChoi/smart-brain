{"ast":null,"code":"import React,{Component,Fragment}from'react';import ParticlesBg from'particles-bg';import Navigation from'./components/Navigation/Navigation';import Signin from'./components/Signin/Signin';import Register from'./components/Register/Register';import Logo from'./components/Logo/Logo';import ImageLinkForm from'./components/ImageLinkForm/ImageLinkForm';import Rank from'./components/Rank/Rank';import FaceRecognition from'./components/FaceRecognition/FaceRecognition';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const initialState={input:'',imageUrl:'',box:{},route:'signin',isSignedIn:false,user:{id:'',name:'',email:'',entries:0,joined:''}};class App extends Component{constructor(){super();this.loadUser=data=>{this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};this.calculateFaceLocation=data=>{const clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;const image=document.getElementById('inputimage');const width=Number(image.width);const height=Number(image.height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};this.displayFaceBox=box=>{this.setState({box:box});};this.onInputChange=event=>{this.setState({input:event.target.value});};this.onButtonSubmit=()=>{this.setState({imageUrl:this.state.input});fetch('http://localhost:3000/imageurl',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({input:this.state.input})}).then(response=>response.json()).then(response=>{if(response){fetch('http://localhost:3000/image',{method:'put',headers:{'Content-type':'application/json'},body:JSON.stringify({id:this.state.user.id})}).then(response=>response.json()).then(count=>{this.setState(Object.assign(this.state.user,{entries:count}));}).catch(console.log);}this.displayFaceBox(this.calculateFaceLocation(response));}).catch(error=>console.log('error',error));};this.onRouteChange=route=>{if(route==='signout'){this.setState(initialState);}else if(route==='home'){this.setState({isSignedIn:true});}this.setState({route:route});};this.state=initialState;}render(){const{isSignedIn,imageUrl,box,route}=this.state;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(ParticlesBg,{className:\"particlesBg\",type:\"cobweb\",num:200,color:[\"#FFF3D9\"]}),/*#__PURE__*/_jsx(Navigation,{onRouteChange:this.onRouteChange,isSignedIn:isSignedIn}),route==='home'?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{imageUrl:imageUrl,box:box})]}):route==='signin'?/*#__PURE__*/_jsx(Signin,{onRouteChange:this.onRouteChange,loadUser:this.loadUser}):/*#__PURE__*/_jsx(Register,{onRouteChange:this.onRouteChange,loadUser:this.loadUser})]});}}export default App;","map":{"version":3,"names":["React","Component","Fragment","ParticlesBg","Navigation","Signin","Register","Logo","ImageLinkForm","Rank","FaceRecognition","jsx","_jsx","jsxs","_jsxs","initialState","input","imageUrl","box","route","isSignedIn","user","id","name","email","entries","joined","App","constructor","loadUser","data","setState","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","onInputChange","event","target","value","onButtonSubmit","state","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","console","log","error","onRouteChange","render","className","children","type","num","color"],"sources":["C:/Users/vagabondkwons/documents/smartbrain/smart-brain/src/App.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport ParticlesBg from 'particles-bg';\r\nimport Navigation from './components/Navigation/Navigation';\r\nimport Signin from './components/Signin/Signin';\r\nimport Register from './components/Register/Register';\r\nimport Logo from './components/Logo/Logo';\r\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\r\nimport Rank from './components/Rank/Rank';\r\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition'\r\nimport './App.css';\r\n\r\nconst initialState = {\r\n  input: '',\r\n  imageUrl: '',\r\n  box: {},\r\n  route: 'signin',\r\n  isSignedIn: false,\r\n  user: {\r\n    id: '',\r\n    name: '',\r\n    email: '',\r\n    entries: 0,\r\n    joined: ''\r\n  }\r\n}\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = initialState;\r\n  }\r\n\r\n  loadUser = (data) => {\r\n    this.setState({user: {\r\n      id: data.id,\r\n      name: data.name,\r\n      email: data.email,\r\n      entries: data.entries,\r\n      joined: data.joined\r\n    }})\r\n  }\r\n\r\n  calculateFaceLocation = (data) => {\r\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\r\n    const image = document.getElementById('inputimage');\r\n    const width = Number(image.width);\r\n    const height = Number(image.height);\r\n\r\n    return {\r\n      leftCol: clarifaiFace.left_col * width,\r\n      topRow: clarifaiFace.top_row * height,\r\n      rightCol: width - (clarifaiFace.right_col * width),\r\n      bottomRow: height - (clarifaiFace.bottom_row * height) \r\n    }\r\n  }\r\n\r\n  displayFaceBox = (box) => {\r\n    this.setState({box:box});\r\n  }\r\n  onInputChange = (event) => {\r\n    this.setState({ input: event.target.value });\r\n  }\r\n  \r\n  onButtonSubmit = () => {\r\n    this.setState({ imageUrl: this.state.input });\r\n    fetch('http://localhost:3000/imageurl', {\r\n        method: 'post',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify({\r\n          input: this.state.input\r\n        })\r\n      })\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        if(response) {\r\n          fetch('http://localhost:3000/image', {\r\n            method: 'put',\r\n            headers: {'Content-type' : 'application/json'},\r\n            body: JSON.stringify({\r\n              id: this.state.user.id\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(count => {\r\n              this.setState(Object.assign(this.state.user, {entries:count}))\r\n            })\r\n            .catch(console.log)\r\n        }\r\n          this.displayFaceBox(this.calculateFaceLocation(response))\r\n        }        \r\n      )\r\n      .catch(error => console.log('error', error));\r\n  }\r\n\r\n  onRouteChange = (route) => {\r\n    if(route === 'signout') {\r\n      this.setState(initialState)\r\n    } else if (route === 'home') {\r\n      this.setState({isSignedIn: true})\r\n    }\r\n    this.setState({route: route});\r\n  }\r\n\r\n  render() {\r\n    const { isSignedIn, imageUrl, box, route } = this.state;\r\n    return (\r\n      <div className=\"App\"> \r\n        <ParticlesBg className='particlesBg' type=\"cobweb\" num={200} color={[\"#FFF3D9\"]} />\r\n        <Navigation onRouteChange={this.onRouteChange} isSignedIn={isSignedIn} />              \r\n        { route === 'home' \r\n          ? <Fragment>\r\n          <Logo />\r\n          <Rank name={this.state.user.name} entries={this.state.user.entries} />\r\n          <ImageLinkForm onInputChange={this.onInputChange} onButtonSubmit={this.onButtonSubmit}/>\r\n          <FaceRecognition imageUrl={imageUrl} box={box} />\r\n        </Fragment>\r\n        : (\r\n          route === 'signin' \r\n          ? <Signin onRouteChange={this.onRouteChange} loadUser={this.loadUser} />\r\n          : <Register onRouteChange={this.onRouteChange} loadUser={this.loadUser} />\r\n        )        \r\n       }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}